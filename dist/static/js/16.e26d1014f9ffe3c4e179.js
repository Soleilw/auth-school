webpackJsonp([16],{GF4k:function(e,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=s("mvHQ"),n=s.n(t),i=s("n5Qe"),r={data:function(){return{code:"",state:"",school:"",user_id:""}},created:function(){console.log(1),this.$toast.loading("登录中..."),console.log(window.location),this.code=i.o("code"),this.state=i.o("state"),this.school=i.o("school"),this.user_id=i.o("user_id"),console.log("code="+this.code),console.log(11,"state="+this.state),this.code?this.GetOpenId(this.code):(console.log(3),i.u(this.state))},methods:{GetOpenId:function(e){console.log(4);var o=this;i.m({name:"校园安全系统",code:o.code},function(e){console.log("获取OpenId"),console.log(e.data),"ok"==e.msg?(sessionStorage.setItem("openId",e.data),"empty-1"===o.state?o.$router.push("/empty-1?school="+sessionStorage.getItem("school")+"&user_id="+sessionStorage.getItem("user_id")+"&open_id="+sessionStorage.getItem("openId")):"empty"===o.state?o.$router.push("/empty?school="+sessionStorage.getItem("school")+"&user_id="+sessionStorage.getItem("user_id")+"&open_id="+sessionStorage.getItem("openId")):o.$router.push("/"+o.state)):o.$toast.fail("请关注公众号")})},GetUserInfo:function(){var e=this;i.p({user_openid:sessionStorage.getItem("openId")},function(o){console.log("11111,用户信息"),console.log(o.user),"ok"===o.msg?(sessionStorage.setItem("userInfor",n()(o.user)),i.d.userInfor=o.user,e.$router.push("/personal")):(console.log("2222,用户信息"),e.$router.push("/userInfo"))})}}},c={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"login-wrap"})},staticRenderFns:[]};var a=s("VU/8")(r,c,!1,function(e){s("icww")},"data-v-232415f2",null);o.default=a.exports},icww:function(e,o){}});